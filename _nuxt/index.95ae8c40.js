import{a as _,i as C,n as L,b as W,t as b,c as j,d as q}from"./index.3c632ed5.js";import{D as S,j as y,z as O,T as P,k as R}from"./entry.153eda82.js";function k(e){var t;const n=b(e);return(t=n==null?void 0:n.$el)!=null?t:n}const z=C?window:void 0,x=C?window.navigator:void 0;function A(...e){let t,n,a,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,l]=e,t=z):[t,n,a,l]=e,!t)return L;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const r=[],d=()=>{r.forEach(o=>o()),r.length=0},p=(o,i,v,m)=>(o.addEventListener(i,v,m),()=>o.removeEventListener(i,v,m)),f=O(()=>[k(t),b(l)],([o,i])=>{if(d(),!o)return;const v=W(i)?{...i}:i;r.push(...n.flatMap(m=>a.map(g=>p(o,m,g,v))))},{immediate:!0,flush:"post"}),u=()=>{f(),d()};return j(u),u}function B(){const e=y(!1);return P()&&R(()=>{e.value=!0}),e}function E(e){const t=B();return S(()=>(t.value,!!e()))}function w(e,t={}){const{controls:n=!1,navigator:a=x}=t,l=E(()=>a&&"permissions"in a);let r;const d=typeof e=="string"?{name:e}:e,p=y(),f=()=>{r&&(p.value=r.state)},u=q(async()=>{if(l.value){if(!r)try{r=await a.permissions.query(d),A(r,"change",f),f()}catch{p.value="prompt"}return r}});return u(),n?{state:p,isSupported:l,query:u}:p}function I(e={}){const{navigator:t=x,read:n=!1,source:a,copiedDuring:l=1500,legacy:r=!1}=e,d=E(()=>t&&"clipboard"in t),p=w("clipboard-read"),f=w("clipboard-write"),u=S(()=>d.value||r),o=y(""),i=y(!1),v=_(()=>i.value=!1,l);function m(){d.value&&p.value!=="denied"?t.clipboard.readText().then(s=>{o.value=s}):o.value=T()}u.value&&n&&A(["copy","cut"],m);async function g(s=b(a)){u.value&&s!=null&&(d.value&&f.value!=="denied"?await t.clipboard.writeText(s):M(s),o.value=s,i.value=!0,v.start())}function M(s){const c=document.createElement("textarea");c.value=s??"",c.style.position="absolute",c.style.opacity="0",document.body.appendChild(c),c.select(),document.execCommand("copy"),c.remove()}function T(){var s,c,h;return(h=(c=(s=document==null?void 0:document.getSelection)==null?void 0:s.call(document))==null?void 0:c.toString())!=null?h:""}return{isSupported:u,text:o,copied:i,copy:g}}export{I as a,A as u};
